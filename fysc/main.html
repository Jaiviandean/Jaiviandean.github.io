<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FYSC</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #333;
            color: white;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #222;
            padding: 10px 20px;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #00f;
        }

        .auth-buttons button {
            margin-left: 10px;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        .auth-buttons .sign-up {
            background-color: grey;
            color: white;
        }

        .auth-buttons .log-in {
            background-color: green;
            color: white;
        }

        .auth-buttons .sign-out,
        .auth-buttons .make-video,
        .auth-buttons .manage-videos,
        .auth-buttons .customize-channel,
        .auth-buttons .view-channel {
            display: none;
            background-color: red;
            color: white;
        }

        .auth-buttons .make-video {
            background-color: blue;
        }

        .auth-buttons .manage-videos {
            background-color: orange;
        }

        .auth-buttons .customize-channel {
            background-color: purple;
        }

        .auth-buttons .view-channel {
            background-color: teal;
        }

        main {
            padding: 20px;
        }

        .section {
            margin-bottom: 20px;
        }

        .section h2 {
            margin: 0;
            padding: 20px;
            background-color: #444;
            border-radius: 5px;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
            padding-top: 60px;
        }

        .modal-content {
            background-color: #333;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 400px;
            border-radius: 10px;
            text-align: center;
        }

        .modal-content input,
        .modal-content textarea {
            width: calc(100% - 40px);
            padding: 10px;
            margin: 10px 0;
            border: none;
            border-radius: 5px;
        }

        .modal-content .auth-btn,
        .modal-content .video-btn,
        .modal-content .customize-btn {
            background-color: green;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }

        .video-item {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .video-item img {
            width: 120px;
            height: 90px;
            margin-right: 20px;
        }

        .video-item h3 {
            margin: 0;
            flex-grow: 1;
        }

        .video-item button {
            margin-left: 10px;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        .video-item .delete-btn {
            background-color: red;
            color: white;
        }

        .video-item .stats-btn {
            background-color: blue;
            color: white;
        }

        .stats-modal-content {
            background-color: #333;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 600px;
            border-radius: 10px;
            text-align: center;
        }

        .stats-modal-content h3,
        .stats-modal-content p {
            margin: 0;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <img src="fysc.png" width="178px" height="38px">
        </div>
        <div class="auth-buttons">
            <button class="sign-up" onclick="openSignUpModal()">Sign Up</button>
            <button class="log-in" onclick="openLogInModal()">Log In</button>
            <button class="sign-out" onclick="signOut()">Sign Out</button>
            <button class="make-video" onclick="openMakeVideoModal()">Make a Video</button>
            <button class="manage-videos" onclick="openManageVideos()">FYSC+ Studio</button>
            <button class="customize-channel" onclick="openCustomizeChannelModal()">Customize Channel</button>
            <button class="view-channel" onclick="viewChannel()">View Channel</button>
        </div>
    </header>
    <main>
        <div class="section">
            <h2 id="welcome-message"></h2>
        </div>
        <div class="section">
            <h2>Recommended Today</h2>
        </div>
        <div class="section">
            <h2>Channels to Explore</h2>
        </div>
        <div class="section">
            <h2>Trends</h2>
        </div>
        <div class="section">
            <h2>Shorts</h2>
        </div>
        <div class="section" id="manage-videos-section" style="display:none;">
            <h2>Manage Your Videos</h2>
            <div id="video-list"></div>
        </div>
        <div class="section">
            <button onclick="window.location.href='/fysc/stream.html'">Open Stream</button>
        </div>
    </main>

    <div id="signUpModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeSignUpModal()">&times;</span>
            <h2>Sign In to <span style="color: #00f;">FYSC</span><span style="color: #f00;">+</span></h2>
            <input type="text" id="signUpUsername" placeholder="Channel Name">
            <input type="password" id="signUpPassword" placeholder="Password (8 char min)">
            <input type="password" id="signUpRetypePassword" placeholder="Retype Password">
            <button class="auth-btn" onclick="signUp()">Sign In</button>
        </div>
    </div>

    <div id="logInModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeLogInModal()">&times;</span>
            <h2>Login to <span style="color: #00f;">FYSC</span><span style="color: #f00;">+</span></h2>
            <input type="text" id="logInUsername" placeholder="Channel Name">
            <input type="password" id="logInPassword" placeholder="Password (8 char min)">
            <button class="auth-btn" onclick="logIn()">Log In</button>
        </div>
    </div>

    <div id="makeVideoModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeMakeVideoModal()">&times;</span>
            <h2>Create a Video</h2>
            <input type="text" id="videoTitle" placeholder="Video Title">
            <textarea id="videoDescription" rows="4" placeholder="Video Description"></textarea>
            <input type="file" id="videoThumbnail" accept="image/*">
            <button class="video-btn" onclick="createVideo()">Upload Video</button>
        </div>
    </div>

    <div id="viewStatsModal" class="modal">
        <div class="stats-modal-content">
            <span class="close" onclick="closeViewStatsModal()">&times;</span>
            <h2>View Statistics</h2>
            <img id="stats-thumbnail" src="" alt="Thumbnail" style="width: 100%; height: auto;">
            <h3 id="stats-title"></h3>
            <p id="stats-description"></p>
            <div id="stats-data"></div>
        </div>
    </div>

    <div id="customizeChannelModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeCustomizeChannelModal()">&times;</span>
            <h2>Customize Your Channel</h2>
            <input type="text" id="channelName" placeholder="Channel Name">
            <textarea id="channelDescription" rows="4" placeholder="Channel Description"></textarea>
            <button class="customize-btn" onclick="customizeChannel()">Save Changes</button>
        </div>
    </div>

    <script>
        let currentUser = null;
        let subscriberCount = 0; // Initialize subscriber count

        function openSignUpModal() {
            document.getElementById('signUpModal').style.display = 'block';
        }

        function closeSignUpModal() {
            document.getElementById('signUpModal').style.display = 'none';
        }

        function openLogInModal() {
            document.getElementById('logInModal').style.display = 'block';
        }

        function closeLogInModal() {
            document.getElementById('logInModal').style.display = 'none';
        }

        function openMakeVideoModal() {
            document.getElementById('makeVideoModal').style.display = 'block';
        }

        function closeMakeVideoModal() {
            document.getElementById('makeVideoModal').style.display = 'none';
        }

        function closeViewStatsModal() {
            document.getElementById('viewStatsModal').style.display = 'none';
        }

        function openCustomizeChannelModal() {
            document.getElementById('customizeChannelModal').style.display = 'block';
        }

        function closeCustomizeChannelModal() {
            document.getElementById('customizeChannelModal').style.display = 'none';
        }

        function signUp() {
            const username = document.getElementById('signUpUsername').value;
            const password = document.getElementById('signUpPassword').value;
            const retypePassword = document.getElementById('signUpRetypePassword').value;

            if (password === retypePassword) {
                currentUser = { username, password, videos: [], channelName: username, channelDescription: '', subscribers: 0 };
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                updateUI();
                closeSignUpModal();
            } else {
                alert('Passwords do not match.');
            }
        }

        function logIn() {
            const username = document.getElementById('logInUsername').value;
            const password = document.getElementById('logInPassword').value;
            const storedUser = JSON.parse(localStorage.getItem('currentUser'));

            if (storedUser && storedUser.username === username && storedUser.password === password) {
                currentUser = storedUser;
                updateUI();
                closeLogInModal();
            } else {
                alert('Invalid login credentials.');
            }
        }

        function signOut() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateUI();
        }

        function createVideo() {
            const title = document.getElementById('videoTitle').value;
            const description = document.getElementById('videoDescription').value;
            const thumbnail = document.getElementById('videoThumbnail').files[0];

            if (title && description && thumbnail) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const video = { title, description, thumbnail: e.target.result, stats: generateRandomStats() };
                    currentUser.videos.push(video);
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    simulateSubscriberIncrease(); // Simulate subscriber increase
                    closeMakeVideoModal();
                };
                reader.readAsDataURL(thumbnail);
            } else {
                alert('Please fill in all fields and select a thumbnail.');
            }
        }

        function simulateSubscriberIncrease() {
            const increase = Math.floor(Math.random() * 10) + 1; // Random increase between 1 to 10
            currentUser.subscribers += increase;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            updateSubscriberCount(); // Update subscriber count in UI
        }

        function updateSubscriberCount() {
            const viewChannelButton = document.querySelector('.view-channel');
            if (currentUser) {
                viewChannelButton.textContent = `View Channel (${currentUser.subscribers} subscribers)`;
            } else {
                viewChannelButton.textContent = `View Channel`;
            }
        }

        function updateUI() {
            const welcomeMessage = document.getElementById('welcome-message');
            const signUpButton = document.querySelector('.sign-up');
            const logInButton = document.querySelector('.log-in');
            const signOutButton = document.querySelector('.sign-out');
            const makeVideoButton = document.querySelector('.make-video');
            const manageVideosButton = document.querySelector('.manage-videos');
            const customizeChannelButton = document.querySelector('.customize-channel');
            const viewChannelButton = document.querySelector('.view-channel');
            const manageVideosSection = document.getElementById('manage-videos-section');

            if (currentUser) {
                welcomeMessage.textContent = `Welcome, ${currentUser.username}`;
                signUpButton.style.display = 'none';
                logInButton.style.display = 'none';
                signOutButton.style.display = 'inline-block';
                makeVideoButton.style.display = 'inline-block';
                manageVideosButton.style.display = 'inline-block';
                customizeChannelButton.style.display = 'inline-block';
                viewChannelButton.style.display = 'inline-block';
                manageVideosSection.style.display = 'block';
                renderVideos();
                updateSubscriberCount();
            } else {
                welcomeMessage.textContent = '';
                signUpButton.style.display = 'inline-block';
                logInButton.style.display = 'inline-block';
                signOutButton.style.display = 'none';
                makeVideoButton.style.display = 'none';
                manageVideosButton.style.display = 'none';
                customizeChannelButton.style.display = 'none';
                viewChannelButton.style.display = 'none';
                manageVideosSection.style.display = 'none';
            }
        }

        function renderVideos() {
            const videoList = document.getElementById('video-list');
            videoList.innerHTML = '';
            currentUser.videos.forEach((video, index) => {
                const videoItem = document.createElement('div');
                videoItem.className = 'video-item';

                const thumbnail = document.createElement('img');
                thumbnail.src = video.thumbnail;

                const title = document.createElement('h3');
                title.textContent = video.title;

                const deleteButton = document.createElement('button');
                deleteButton.className = 'delete-btn';
                deleteButton.textContent = 'Delete';
                deleteButton.onclick = () => deleteVideo(index);

                const statsButton = document.createElement('button');
                statsButton.className = 'stats-btn';
                statsButton.textContent = 'View Stats';
                statsButton.onclick = () => viewStats(video);

                videoItem.appendChild(thumbnail);
                videoItem.appendChild(title);
                videoItem.appendChild(deleteButton);
                videoItem.appendChild(statsButton);

                videoList.appendChild(videoItem);
            });
        }

        function deleteVideo(index) {
            currentUser.videos.splice(index, 1);
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            renderVideos();
        }

        function viewStats(video) {
            const statsModal = document.getElementById('viewStatsModal');
            document.getElementById('stats-thumbnail').src = video.thumbnail;
            document.getElementById('stats-title').textContent = video.title;
            document.getElementById('stats-description').textContent = video.description;
            const statsData = document.getElementById('stats-data');
            statsData.innerHTML = '';

            for (const [key, value] of Object.entries(video.stats)) {
                const statElement = document.createElement('p');
                statElement.textContent = `${key}: ${value}`;
                statsData.appendChild(statElement);
            }

            statsModal.style.display = 'block';
        }

        function generateRandomStats() {
            return {
                views: Math.floor(Math.random() * 10000),
                likes: Math.floor(Math.random() * 1000),
                dislikes: Math.floor(Math.random() * 500),
                comments: Math.floor(Math.random() * 200)
            };
        }

        function openManageVideos() {
            const manageVideosSection = document.getElementById('manage-videos-section');
            manageVideosSection.style.display = 'block';
        }

        function customizeChannel() {
            const channelName = document.getElementById('channelName').value;
            const channelDescription = document.getElementById('channelDescription').value;

            currentUser.channelName = channelName;
            currentUser.channelDescription = channelDescription;

            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            updateUI();
            closeCustomizeChannelModal();
        }

        function viewChannel() {
            const channelName = currentUser.channelName;
            const channelDescription = currentUser.channelDescription;

            window.location.href = `channel_page.html?channel=${encodeURIComponent(channelName)}&description=${encodeURIComponent(channelDescription)}`;
        }

        document.addEventListener('DOMContentLoaded', () => {
            const storedUser = JSON.parse(localStorage.getItem('currentUser'));
            if (storedUser) {
                currentUser = storedUser;
            }
            updateUI();
        });
    </script>
</body>
</html>

